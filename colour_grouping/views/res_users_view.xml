<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <!-- agregar campo color en preferencias -->

        <record id="view_users_form_simple_colour_modif" model="ir.ui.view">
            <field name="name">res.users.preferences.form</field>
            <field name="model">res.users</field>
            <field eval="18" name="priority"/>
            <field name="inherit_id" ref="base.view_users_form_simple_modif"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='tz']" position="after">
                    <field name="colour_id" on_change="onchange_colour(colour_id)"/>
                </xpath>
            </field>
        </record>

        <!-- agregar el campo color -->

        <record id="view_users_colour_form" model="ir.ui.view">
            <field name="name">base.view.users.colour.form</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.view_users_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='active']" position="after">
                    <field name="colour_id" groups="base.group_erp_manager"/>
                </xpath>
            </field>
        </record>

        <!-- regla para que se armen grupos de colores -->

        <record id="res_users_colour_rule" model="ir.rule">
            <field name="name">user colour rule</field>
            <field name="model_id" ref="model_res_users"/>
            <field eval="True" name="global"/>
            <field name="domain_force">[('colour_id','=',user.colour_id.id)]</field>
        </record>

    </data>
</openerp>